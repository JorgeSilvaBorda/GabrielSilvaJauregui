DROP DATABASE ventas;
CREATE DATABASE ventas;
USE ventas;

CREATE TABLE `VENTAPRODUCTO` (
  `IDVENTA` int NOT NULL,
  `IDPRODUCTO` int NOT NULL,
  `CANTIDAD` int NOT NULL,
  `TOTAL` int NOT NULL,
  KEY `IDVENTA` (`IDVENTA`),
  KEY `IDPRODUCTO` (`IDPRODUCTO`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


CREATE TABLE `VENDEDOR` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `RUT` varchar(10) NOT NULL,
  `NOMBRES` varchar(200) NOT NULL,
  `APPATERNO` varchar(200) NOT NULL,
  `APMATERNO` varchar(200) NOT NULL,
  `PASSWORD` varchar(200) NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `RUT` (`RUT`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `PRODUCTO` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `NOMBRE` varchar(500) NOT NULL,
  `PRECIO` int NOT NULL,
  `CANTIDAD` int NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `NOMBRE` (`NOMBRE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

ALTER TABLE VENTAPRODUCTO ADD FOREIGN KEY(IDPRODUCTO) REFERENCES PRODUCTO(ID);

CREATE TABLE `VENTA` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `FECHA` date NOT NULL,
  `IDVENDEDOR` int NOT NULL,
  `TOTAL` int NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `IDVENDEDOR` (`IDVENDEDOR`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

ALTER TABLE VENTA ADD FOREIGN KEY(IDVENDEDOR) REFERENCES VENDEDOR(ID);
ALTER TABLE VENTAPRODUCTO ADD FOREIGN KEY(IDVENTA) REFERENCES VENTA(ID);

INSERT INTO VENDEDOR(RUT, NOMBRES, APPATERNO, APMATERNO, PASSWORD) VALUES('11111111-1', 'Admin', 'Administrador', 'Ventas', 'password');
